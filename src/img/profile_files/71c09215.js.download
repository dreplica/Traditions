var MySaves;(function(n){function ht(){sj_evt.bind("ClientLinkAction_Loaded",pt,!0);t&&(e.bind(t,y,function(){return h(f.Long)}),e.bind(t,ft,function(){return h(f.Short)}),e.bind(_d.body,y,lt),e.bind(_d.body,et,at));tt()&&ct()}function ct(){var n=i.gfbc("infact",_ge("vmc")),t,r;n&&n.firstChild&&(t=n.firstChild,r=t.getAttribute("data-tooltip"),r==ut&&t.setAttribute(a,"1"))}function lt(t){var r=sj_et(t),i=nt(r);i&&(n.selectedElement=i,o==null&&s(i))}function at(t){var f=t.keyCode,r,i,u;f===st&&(r=sj_et(t),i=nt(r),i?(n.selectedElement=i,s(i),yt(),g(t)):r==d&&(u=vt(n.selectedElement),u&&(u.focus(),g(t))))}function vt(n){var r,t,i;if(n&&(r=u(n,"infsec"),r&&(t=r.getElementsByTagName("A"),t&&t.length>1)))for(i=0;i<t.length;i++)if(t[i]==n.parentElement&&i<t.length-1)return t[i+1];return null}function g(n){sj_pd(n);sj_sp(n)}function yt(){var n,i;t&&(n=t.getElementsByTagName("A"),n&&n.length>1&&(i=n[0],i.focus(),d=n[1]))}function nt(n){var r,i;if(n){if(r=u(n,"ms_ba_op"),r&&r.parentElement==t)return null;if(i=n.parentNode,i&&i.hash&&i.hash.indexOf(w)===0)return i;if(n.hash&&n.hash.indexOf(w)===0)return n}return null}function pt(n){if(n&&n[1]){var t=n[1];t.bind("Save",wt,!0);t.bind("Unsave",gt,!0);t.bind("OnMoveTo",bt,!0)}}function wt(t){var i=l(t);i&&(n.saveFunction(i,function(n){n&&n.IsSuccess||c(!1,t)}),n.selectedElement=t,(!_w.MySavesEdu||MySavesEdu.doneFiring)&&s(t),clearTimeout(o),o=setTimeout(function(){o=null},1500),c(!0,t));FavLog.l(FavLog.Type.Click,FavLog.Meta.Save,n.componentType)}function bt(t){n.abstractOnMoveTo(t)}function kt(){var n=parseQueryParams().q;return{title:n?decodeURI(n):null}}function s(n,u){var p,a,w,d;if(u===void 0&&(u="down"),t&&n&&!(rt()&&n.id==="mb_fav")){r&&clearTimeout(r);var o=n.getBoundingClientRect(),v="Top",y=sj_go(n,v),c=sj_go(_ge("vm_c"),v),g=_w.innerHeight;(it()||rt()&&b)&&(c+=sj_go(b,"Top"));switch(u){case"up":i.sb(t,g-y+c);break;case"down":default:i.st(t,y+o.height-c)}var s="",e="",l=_d.body.offsetWidth;l-o.right>200?(p=5,e=Math.max(o.right-100+_w.pageXOffset,p-o.left),it()&&(e-=ot.getBoundingClientRect().left,e<0&&(e=0))):(s=l-o.right-60+_w.pageXOffset,e="",s<0&&(s=0),a=t.getBoundingClientRect(),w=a.width<250?250:a.width,w+s>l&&(s="",e=10));i.sr(t,s);i.sl(t,e);k&&(d=parseInt(o.left+o.width/2-e+""),i.sl(k,d));i.sdt(t,DisplayType.InlineBlock);r=setTimeout(function(){h(f.Short)},1)}}function tt(){var n=_w.location.href.toLowerCase();return n.indexOf("&testhooks=~1")>0&&n.indexOf("&vpt=1")>0}function dt(){var n=i.gebc("mystuff",_d)[0];n&&i.ac(n,a)}function h(u){r?clearTimeout(r):FavLog.l(FavLog.Type.Show,FavLog.Meta.ShowBalloon,n.componentType);i.ac(t,p);sj_evt.fire("MySavesBalloon.show");var f=function(){i.rc(t,p);sj_evt.fire("MySavesBalloon.hide");r=setTimeout(function(){t&&i.sdt(t,DisplayType.Default);n.selectedElement=null;r=null},500)};tt()||(dt(),r=setTimeout(f,u))}function gt(u){var f=l(u);f||(f=l(n.selectedElement),u=n.selectedElement);f&&(n.unsaveFunction(f,function(n){n&&n.IsSuccess||c(!0,u)}),c(!1,u),t&&(r&&clearTimeout(r),i.sdt(t,DisplayType.Default)));FavLog.l(FavLog.Type.Click,FavLog.Meta.Unsave,n.componentType)}function c(n,t){if(t){var r=u(t,"iuscp")||u(t,"iuscwrapper");r&&(n?i.ac(r,v):i.rc(r,v))}}function l(t){if(t){if(typeof MySavesMetadataProvider!="undefined")return MySavesMetadataProvider.getMetadata(t);if(t=u(t,"iuscp"),t)return JSON.parse(i.ga(t.querySelector(".iusc"),"m"))}else if(typeof n.contextMetadata!="undefined")return n.contextMetadata;return null}function u(n,t){while(n){if(i.hc(n,t))return n;n=n.parentElement}return null}function it(){return typeof ImageDetailV2!="undefined"&&ImageDetailV2.isRightRailShown()}function rt(){return typeof MobileImageDetail!="undefined"}var f;(function(n){n[n.Short=3e3]="Short";n[n.Long=99999]="Long"})(f=n.AnimationTimeout||(n.AnimationTimeout={}));var a="vptest",ut="Save this",v="saved",y="mouseover",ft="mouseout",et="keydown",e=SmartEvent,i=pMMUtils,r,p="show",w="#CA!Unsave",b=_ge("insights"),ot=_ge("insights_wrap"),o=null,t=_ge("ms_ba"),k=_ge("ms_ba_ar"),st=9,d=null;n.init=ht;n.abstractOnMoveTo=function(){return null};n.getSpecifier=kt;n.showBalloon=s;n.setBalloonVisible=h;n.getMetadata=l})(MySaves||(MySaves={}));MySaves.init()